<!DOCTYPE html>

<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ƒê√†n Piano - Tone Dm</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

```
    body {
        font-family: Arial, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding: 5px;
        touch-action: manipulation;
        overflow-x: hidden;
    }
    
    .start-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.9);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        transition: opacity 0.3s;
    }
    
    .start-overlay.hidden {
        opacity: 0;
        pointer-events: none;
    }
    
    .start-btn {
        background: linear-gradient(145deg, #4CAF50, #45a049);
        color: white;
        border: none;
        border-radius: 15px;
        padding: 25px 50px;
        font-size: 24px;
        font-weight: bold;
        cursor: pointer;
        box-shadow: 0 8px 15px rgba(0,0,0,0.5);
        transition: all 0.2s;
        touch-action: manipulation;
    }
    
    .start-btn:active {
        transform: scale(0.95);
        box-shadow: 0 5px 10px rgba(0,0,0,0.5);
    }
    
    .start-text {
        color: white;
        font-size: 18px;
        margin-bottom: 20px;
        text-align: center;
        padding: 0 20px;
    }
    
    .container {
        width: 100%;
        max-width: 100vw;
    }
    
    .title {
        text-align: center;
        color: white;
        margin-bottom: 8px;
        font-size: 18px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    
    .chords-section {
        background: rgba(255,255,255,0.1);
        backdrop-filter: blur(10px);
        border-radius: 10px;
        padding: 8px;
        margin-bottom: 8px;
        max-width: 400px;
    }
    
    .instrument-selector {
        position: relative;
        margin-bottom: 8px;
    }
    
    .instrument-current {
        background: linear-gradient(145deg, #9C27B0, #7B1FA2);
        color: white;
        border: none;
        border-radius: 6px;
        padding: 8px 12px;
        font-size: 13px;
        font-weight: bold;
        cursor: pointer;
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    
    .instrument-current:active {
        transform: scale(0.98);
    }
    
    .instrument-dropdown {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: rgba(0,0,0,0.9);
        backdrop-filter: blur(10px);
        border-radius: 6px;
        margin-top: 4px;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
        z-index: 100;
        box-shadow: 0 4px 8px rgba(0,0,0,0.5);
    }
    
    .instrument-dropdown.open {
        max-height: 300px;
        overflow-y: auto;
    }
    
    .instrument-option {
        background: transparent;
        color: white;
        border: none;
        padding: 10px 12px;
        font-size: 13px;
        font-weight: bold;
        cursor: pointer;
        width: 100%;
        text-align: left;
        border-bottom: 1px solid rgba(255,255,255,0.1);
        transition: background 0.2s;
    }
    
    .instrument-option:hover, .instrument-option:active {
        background: rgba(156, 39, 176, 0.3);
    }
    
    .instrument-option:last-child {
        border-bottom: none;
    }
    
    .tone-selector {
        display: flex;
        gap: 5px;
        margin-bottom: 8px;
        overflow-x: auto;
    }
    
    .tone-btn {
        background: rgba(255,255,255,0.2);
        color: white;
        border: 2px solid rgba(255,255,255,0.3);
        border-radius: 6px;
        padding: 6px 12px;
        font-size: 12px;
        font-weight: bold;
        cursor: pointer;
        white-space: nowrap;
        transition: all 0.2s;
    }
    
    .tone-btn.active {
        background: linear-gradient(145deg, #FF9800, #F57C00);
        border-color: #FF9800;
    }
    
    .tone-btn:active {
        transform: scale(0.95);
    }
    
    .chords-title {
        color: white;
        font-size: 13px;
        margin-bottom: 6px;
        text-align: center;
    }
    
    .chords-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 5px;
    }
    
    .chord-btn {
        background: linear-gradient(145deg, #4CAF50, #45a049);
        color: white;
        border: 2px solid rgba(255,255,255,0.4);
        border-radius: 6px;
        padding: 10px 5px;
        font-size: 13px;
        font-weight: bold;
        cursor: pointer;
        box-shadow: 0 3px 5px rgba(0,0,0,0.3);
        transition: all 0.1s;
        touch-action: manipulation;
    }
    
    .chord-btn:active {
        transform: scale(0.95);
        box-shadow: 0 2px 3px rgba(0,0,0,0.3);
        background: linear-gradient(145deg, #66BB6A, #5CB860);
    }
    
    .piano-container {
        background: rgba(0,0,0,0.3);
        backdrop-filter: blur(10px);
        border-radius: 10px;
        padding: 10px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        overflow-x: auto;
        overflow-y: hidden;
    }
    
    .piano {
        position: relative;
        height: 160px;
        width: 700px;
        margin: 0 auto;
    }
    
    .white-key {
        position: absolute;
        width: 50px;
        height: 160px;
        background: linear-gradient(to bottom, #ffffff 0%, #f0f0f0 100%);
        border: 2px solid #222;
        border-radius: 0 0 5px 5px;
        cursor: pointer;
        user-select: none;
        touch-action: manipulation;
        display: flex;
        align-items: flex-end;
        justify-content: center;
        padding-bottom: 6px;
        font-size: 10px;
        color: #666;
        font-weight: bold;
    }
    
    .white-key:active {
        background: linear-gradient(to bottom, #e8e8e8 0%, #d8d8d8 100%);
        box-shadow: inset 0 2px 5px rgba(0,0,0,0.2);
    }
    
    .black-key {
        position: absolute;
        width: 33px;
        height: 100px;
        background: linear-gradient(to bottom, #444 0%, #000 100%);
        border: 1px solid #000;
        border-radius: 0 0 3px 3px;
        cursor: pointer;
        user-select: none;
        touch-action: manipulation;
        z-index: 10;
        color: white;
        display: flex;
        align-items: flex-end;
        justify-content: center;
        padding-bottom: 5px;
        font-size: 8px;
        font-weight: bold;
        box-shadow: 0 3px 5px rgba(0,0,0,0.5);
    }
    
    .black-key:active {
        background: linear-gradient(to bottom, #666 0%, #333 100%);
        box-shadow: inset 0 2px 5px rgba(0,0,0,0.5);
    }
    
    .info {
        text-align: center;
        color: white;
        margin-top: 8px;
        font-size: 11px;
        line-height: 1.4;
    }
</style>
```

</head>
<body>
    <div class="start-overlay" id="startOverlay">
        <div class="start-text">üéπ B·∫•m n√∫t b√™n d∆∞·ªõi ƒë·ªÉ b·∫Øt ƒë·∫ßu ch∆°i nh·∫°c</div>
        <button class="start-btn" id="startBtn">üéµ B·∫ÆT ƒê·∫¶U CH∆†I</button>
    </div>

```
<div class="container">
    <h1 class="title">üéπ ƒê√†n Piano</h1>
    
    <div class="chords-section">
        <div class="chords-title">üé∏ Nh·∫°c C·ª•</div>
        <div class="instrument-selector">
            <button class="instrument-current" id="instrumentCurrent">
                <span id="instrumentName">üéπ Piano</span>
                <span id="dropdownArrow">‚ñº</span>
            </button>
            <div class="instrument-dropdown" id="instrumentDropdown">
                <button class="instrument-option" data-instrument="piano">üéπ Piano</button>
                <button class="instrument-option" data-instrument="guitar">üé∏ Guitar</button>
                <button class="instrument-option" data-instrument="violin">üéª Violin</button>
                <button class="instrument-option" data-instrument="flute">üé∫ Flute</button>
                <button class="instrument-option" data-instrument="organ">üéõÔ∏è Organ</button>
                <button class="instrument-option" data-instrument="synth">üéπ Synth</button>
                <button class="instrument-option" data-instrument="bass">üé∏ Bass</button>
                <button class="instrument-option" data-instrument="trumpet">üé∫ Trumpet</button>
                <button class="instrument-option" data-instrument="saxophone">üé∑ Saxophone</button>
                <button class="instrument-option" data-instrument="harp">üéµ Harp</button>
            </div>
        </div>
        
        <div class="chords-title">üéµ Tone</div>
        <div class="tone-selector">
            <button class="tone-btn active" data-tone="Dm">Dm</button>
            <button class="tone-btn" data-tone="Am">Am</button>
            <button class="tone-btn" data-tone="C">C</button>
            <button class="tone-btn" data-tone="G">G</button>
            <button class="tone-btn" data-tone="Em">Em</button>
            <button class="tone-btn" data-tone="F">F</button>
        </div>
        
        <div class="chords-title" id="currentTone">H·ª£p √Çm - Tone Dm</div>
        <div class="chords-grid" id="chordsGrid"></div>
    </div>
    
    <div class="piano-container">
        <div class="piano" id="piano"></div>
    </div>
    
    <div class="info">
        B·∫•m h·ª£p √¢m ph√≠a tr√™n ‚Ä¢ B·∫•m ph√≠m ƒë√†n ƒë·ªÉ ch∆°i giai ƒëi·ªáu
    </div>
</div>

<script>
    let audioContext = null;
    let isStarted = false;
    let currentTone = 'Dm';
    let currentInstrument = 'piano';
    
    function initAudioContext() {
        if (!audioContext) {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
        }
        if (audioContext.state === 'suspended') {
            audioContext.resume();
        }
    }
    
    const notes = {
        'C4': 261.63, 'C#4': 277.18, 'D4': 293.66, 'D#4': 311.13,
        'E4': 329.63, 'F4': 349.23, 'F#4': 369.99, 'G4': 392.00,
        'G#4': 415.30, 'A4': 440.00, 'A#4': 466.16, 'B4': 493.88,
        'C5': 523.25, 'C#5': 554.37, 'D5': 587.33, 'D#5': 622.25, 
        'E5': 659.25, 'F5': 698.46, 'F#5': 739.99, 'G5': 783.99,
        'G#5': 830.61, 'A5': 880.00, 'A#5': 932.33, 'B5': 987.77
    };
    
    const instrumentSettings = {
        piano: { type: 'sine', attack: 0.01, decay: 1.5, sustain: 0.3, release: 0.001, name: 'üéπ Piano' },
        guitar: { type: 'triangle', attack: 0.005, decay: 0.8, sustain: 0.25, release: 0.001, name: 'üé∏ Guitar' },
        violin: { type: 'sawtooth', attack: 0.1, decay: 2.0, sustain: 0.35, release: 0.001, name: 'üéª Violin' },
        flute: { type: 'sine', attack: 0.05, decay: 1.2, sustain: 0.2, release: 0.001, name: 'üé∫ Flute' },
        organ: { type: 'square', attack: 0.001, decay: 2.5, sustain: 0.4, release: 0.001, name: 'üéõÔ∏è Organ' },
        synth: { type: 'sawtooth', attack: 0.02, decay: 1.0, sustain: 0.3, release: 0.001, name: 'üéπ Synth' },
        bass: { type: 'triangle', attack: 0.01, decay: 0.6, sustain: 0.2, release: 0.001, name: 'üé∏ Bass' },
        trumpet: { type: 'square', attack: 0.08, decay: 1.5, sustain: 0.3, release: 0.001, name: 'üé∫ Trumpet' },
        saxophone: { type: 'sawtooth', attack: 0.06, decay: 1.8, sustain: 0.35, release: 0.001, name: 'üé∑ Saxophone' },
        harp: { type: 'sine', attack: 0.001, decay: 1.2, sustain: 0.15, release: 0.001, name: 'üéµ Harp' }
    };
    
    const chords = {
        'C': ['C4', 'E4', 'G4'], 'Dm': ['D4', 'F4', 'A4'], 'Em': ['E4', 'G4', 'B4'],
        'F': ['F4', 'A4', 'C5'], 'G': ['G4', 'B4', 'D5'], 'Am': ['A4', 'C5', 'E5'],
        'Bb': ['A#4', 'D5', 'F4'], 'Gm': ['G4', 'A#4', 'D5'], 'A': ['A4', 'C#5', 'E5'],
        'Bm': ['B4', 'D5', 'F#5'], 'D': ['D4', 'F#4', 'A4'], 'E': ['E4', 'G#4', 'B4'],
        'A7': ['A4', 'C#5', 'E5', 'G4'], 'D7': ['D4', 'F#4', 'A4', 'C5'],
        'E7': ['E4', 'G#4', 'B4', 'D5'], 'G7': ['G4', 'B4', 'D5', 'F5'],
        'C7': ['C4', 'E4', 'G4', 'A#4'], 'Dm7': ['D4', 'F4', 'A4', 'C5'],
        'Em7': ['E4', 'G4', 'B4', 'D5'], 'Am7': ['A4', 'C5', 'E5', 'G5'],
        'Fm': ['F4', 'G#4', 'C5'], 'Cm': ['C4', 'D#4', 'G4']
    };
    
    const toneChords = {
        'Dm': ['Dm', 'Am', 'Bb', 'C', 'F', 'Gm', 'A7', 'Dm7'],
        'Am': ['Am', 'Dm', 'Em', 'F', 'C', 'G', 'E7', 'Am7'],
        'C': ['C', 'F', 'G', 'Am', 'Em', 'Dm', 'G7', 'C7'],
        'G': ['G', 'C', 'D', 'Em', 'Am', 'Bm', 'D7', 'G7'],
        'Em': ['Em', 'Am', 'Bm', 'C', 'G', 'D', 'E7', 'Em7'],
        'F': ['F', 'Bb', 'C', 'Dm', 'Am', 'Gm', 'C7', 'Dm7']
    };
    
    const piano = document.getElementById('piano');
    
    const whiteKeysData = [
        {note: 'C4', left: 0}, {note: 'D4', left: 50}, {note: 'E4', left: 100},
        {note: 'F4', left: 150}, {note: 'G4', left: 200}, {note: 'A4', left: 250},
        {note: 'B4', left: 300}, {note: 'C5', left: 350}, {note: 'D5', left: 400},
        {note: 'E5', left: 450}, {note: 'F5', left: 500}, {note: 'G5', left: 550},
        {note: 'A5', left: 600}, {note: 'B5', left: 650}
    ];
    
    const blackKeysData = [
        {note: 'C#4', left: 33}, {note: 'D#4', left: 83},
        {note: 'F#4', left: 183}, {note: 'G#4', left: 233}, {note: 'A#4', left: 283},
        {note: 'C#5', left: 383}, {note: 'D#5', left: 433},
        {note: 'F#5', left: 533}, {note: 'G#5', left: 583}, {note: 'A#5', left: 633}
    ];
    
    whiteKeysData.forEach(data => {
        const key = document.createElement('div');
        key.className = 'white-key';
        key.dataset.note = data.note;
        key.textContent = data.note;
        key.style.left = data.left + 'px';
        key.addEventListener('touchstart', (e) => { e.preventDefault(); if (isStarted) playNote(data.note); });
        key.addEventListener('mousedown', () => { if (isStarted) playNote(data.note); });
        piano.appendChild(key);
    });
    
    blackKeysData.forEach(data => {
        const key = document.createElement('div');
        key.className = 'black-key';
        key.dataset.note = data.note;
        key.textContent = data.note;
        key.style.left = data.left + 'px';
        key.addEventListener('touchstart', (e) => { e.preventDefault(); if (isStarted) playNote(data.note); });
        key.addEventListener('mousedown', () => { if (isStarted) playNote(data.note); });
        piano.appendChild(key);
    });
    
    function playNote(note) {
        if (!audioContext || !notes[note]) return;
        const settings = instrumentSettings[currentInstrument];
        const osc = audioContext.createOscillator();
        const gain = audioContext.createGain();
        osc.connect(gain);
        gain.connect(audioContext.destination);
        osc.frequency.value = notes[note];
        osc.type = settings.type;
        const now = audioContext.currentTime;
        gain.gain.setValueAtTime(0, now);
        gain.gain.linearRampToValueAtTime(settings.sustain, now + settings.attack);
        gain.gain.exponentialRampToValueAtTime(settings.release, now + settings.decay);
        osc.start(now);
        osc.stop(now + settings.decay);
    }
    
    function playChord(chordName) {
        const chordNotes = chords[chordName];
        if (!chordNotes) return;
        chordNotes.forEach(note => playNote(note));
    }
    
    function renderChords(tone) {
        const grid = document.getElementById('chordsGrid');
        const title = document.getElementById('currentTone');
        grid.innerHTML = '';
        title.textContent = `H·ª£p √Çm - Tone ${tone}`;
        toneChords[tone].forEach(chordName => {
            const btn = document.createElement('button');
            btn.className = 'chord-btn';
            btn.dataset.chord = chordName;
            btn.textContent = chordName;
            btn.addEventListener('touchstart', (e) => { e.preventDefault(); if (isStarted) playChord(chordName); });
            btn.addEventListener('click', () => { if (isStarted) playChord(chordName); });
            grid.appendChild(btn);
        });
    }
    
    const instrumentCurrent = document.getElementById('instrumentCurrent');
    const instrumentDropdown = document.getElementById('instrumentDropdown');
    const instrumentName = document.getElementById('instrumentName');
    const dropdownArrow = document.getElementById('dropdownArrow');
    
    instrumentCurrent.addEventListener('click', () => {
        if (!isStarted) return;
        instrumentDropdown.classList.toggle('open');
        dropdownArrow.textContent = instrumentDropdown.classList.contains('open') ? '‚ñ≤' : '‚ñº';
    });
    
    document.querySelectorAll('.instrument-option').forEach(btn => {
        btn.addEventListener('click', () => {
            if (!isStarted) return;
            currentInstrument = btn.dataset.instrument;
            instrumentName.textContent = instrumentSettings[currentInstrument].name;
            instrumentDropdown.classList.remove('open');
            dropdownArrow.textContent = '‚ñº';
        });
    });
    
    document.addEventListener('click', (e) => {
        if (!e.target.closest('.instrument-selector')) {
            instrumentDropdown.classList.remove('open');
            dropdownArrow.textContent = '‚ñº';
        }
    });
    
    document.querySelectorAll('.tone-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            if (!isStarted) return;
            document.querySelectorAll('.tone-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            currentTone = btn.dataset.tone;
            renderChords(currentTone);
        });
    });
    
    const startBtn = document.getElementById('startBtn');
    const startOverlay = document.getElementById('startOverlay');
    
    startBtn.addEventListener('click', () => {
        initAudioContext();
        isStarted = true;
        startOverlay.classList.add('hidden');
        renderChords(currentTone);
        playNote('C4', 0.1);
    });
    
    startBtn.addEventListener('touchstart', (e) => {
        e.preventDefault();
        initAudioContext();
        isStarted = true;
        startOverlay.classList.add('hidden');
        renderChords(currentTone);
        playNote('C4', 0.1);
    });
</script>
```

</body>
</html>