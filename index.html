<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Táº¡o link cÃ i Ä‘áº·t iOS (.plist) tá»« file táº£i lÃªn</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <style>
    body { font-family: system-ui, Arial, sans-serif; background:#f7f7f9; color:#222; padding:24px; }
    h1 { font-size: 1.2rem; margin-bottom:16px;}
    .form-wrap { background: #fff; border-radius: 12px; padding: 18px 18px 10px 18px; max-width: 450px; margin: 0 auto; box-shadow: 0 2px 8px #0001;}
    label { display:block; margin:12px 0 5px; font-size:1rem;}
    input[type="text"], input[type="file"] {
      width: 100%;
      box-sizing: border-box;
      padding: 10px;
      border-radius: 7px;
      border:1px solid #bbb;
      margin-bottom: 5px;
      font-size: 16px;
      background: #f9fafe;
      transition: border-color 0.2s;
    }
    input[type="text"]:focus, input[type="file"]:focus { border-color: #1976d2; outline:none;}
    button {
      width:100%;
      padding:12px 0;
      border-radius:7px;
      background:#1976d2;
      color:#fff;
      border:none;
      font-size: 16px;
      font-weight:500;
      margin: 18px 0 0 0;
      cursor:pointer;
      transition: background 0.2s;
    }
    button:disabled { opacity:0.65; cursor:not-allowed;}
    .result {
      background: #fff;
      border-radius: 8px;
      margin: 20px auto 0 auto;
      padding: 15px 16px 8px 16px;
      border: 1px solid #eee;
      max-width: 450px;
      word-break: break-word;
    }
    .result label {margin:0;}
    .note {font-size:0.93rem; color:#555; margin:18px auto 0 auto; max-width:450px;}
    .install-link, .plist-link {
      display:inline-block;
      margin-top:8px;
      font-weight: bold;
      color:#1976d2;
      text-decoration: none;
      word-break: break-all;
    }
    .footer{margin-top:38px;text-align:center;color:#555;font-size:0.96rem;}
    pre{background:#f5f5f5;padding:8px;border-radius:6px;max-width:100%;overflow:auto;}
    details{margin-top:1em;}
    .plist-sample-link {
      display: inline-block;
      padding: 7px 14px;
      background: #1976d2;
      color: #fff;
      border-radius: 6px;
      text-decoration: none;
      margin-bottom: 8px;
      font-size: 15px;
      font-weight: 500;
    }
    .plist-sample-link:hover {background: #125299;}
    @media (max-width: 520px) {
      body {padding:10px;}
      .form-wrap, .result, .note {padding:12px 4vw;}
    }
  </style>
</head>
<body>
  <h1>Táº¡o link cÃ i Ä‘áº·t iOS (.plist) tá»« file táº£i lÃªn</h1>
  <div style="text-align:center;margin-bottom:10px;">
    <a class="plist-sample-link" href="https://github.com/nhut990/files/raw/refs/heads/main/hinh/Test_taocaidat.plist" download="Test_taocaidat.plist" target="_blank">
      ğŸ“„ Táº£i file .plist máº«u
    </a>
  </div>
  <form class="form-wrap" onsubmit="return false;">
    <label>Chá»n file .plist máº«u trÃªn mÃ¡y báº¡n:</label>
    <input type="file" id="plistFile">

    <label>Nháº­p Link iPA:</label>
    <input type="text" id="ipaUrl" placeholder="https://.../yourapp.ipa" autocomplete="off" inputmode="url">

    <label>Nháº­p Bundle ID:</label>
    <input type="text" id="bundleId" placeholder="com.example.app" autocomplete="off">

    <label>Nháº­p PhiÃªn Báº£n:</label>
    <input type="text" id="version" placeholder="1.0.0" autocomplete="off">

    <label>Nháº­p TÃªn App:</label>
    <input type="text" id="appName" placeholder="TÃªn á»©ng dá»¥ng" autocomplete="off">

    <button id="generateBtn">Táº¡o file .plist & Link cÃ i Ä‘áº·t</button>
  </form>

  <div id="result" class="result" style="display:none"></div>
  <div class="note">
    * Náº¿u báº¡n chÆ°a cÃ³ file máº«u, hÃ£y táº£i file á»Ÿ trÃªn vá» rá»“i upload láº¡i khi táº¡o plist.<br>
    * Sau khi táº£i file .plist Ä‘Ã£ Ä‘iá»n, báº¡n cáº§n upload lÃªn host HTTPS cá»§a báº¡n (github.io, firebase, vps...)<br>
    * Link cÃ i Ä‘áº·t <b>itms-services://...</b> chá»‰ hoáº¡t Ä‘á»™ng trÃªn iPhone/iPad.<br>
    * File .plist máº«u nÃªn dÃ¹ng Ä‘Ãºng 4 cá»¥m tá»«: <b>Nháº­p Link iPA</b>, <b>Nháº­p Bundle ID</b>, <b>Nháº­p PhiÃªn Báº£n</b>, <b>Nháº­p TÃªn App</b>
  </div>
  <div class="footer">
    Â© 2025 - by Minh Nhut
  </div>
<script>
document.getElementById('generateBtn').onclick = async function() {
  const plistInput = document.getElementById('plistFile');
  const ipaUrl = document.getElementById('ipaUrl').value.trim();
  const bundleId = document.getElementById('bundleId').value.trim();
  const version = document.getElementById('version').value.trim();
  const appName = document.getElementById('appName').value.trim();
  const result = document.getElementById('result');
  result.style.display = "none";
  result.innerHTML = "";

  if(!plistInput.files[0]) {
    alert("Vui lÃ²ng chá»n file .plist máº«u trÃªn mÃ¡y báº¡n!");
    return;
  }
  if(!ipaUrl || !bundleId || !version || !appName) {
    alert("Vui lÃ²ng nháº­p Ä‘áº§y Ä‘á»§ thÃ´ng tin!");
    return;
  }

  result.innerHTML = "Äang Ä‘á»c file .plist máº«u, vui lÃ²ng Ä‘á»£i...";
  result.style.display = "block";

  // Äá»c file plist máº«u
  const fileText = await new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.onload = e => resolve(e.target.result);
    reader.onerror = e => reject(e);
    reader.readAsText(plistInput.files[0]);
  });

  // Thay tháº¿ cÃ¡c cá»¥m tá»« placeholder tiáº¿ng Viá»‡t
  let plist = fileText
    .replace(/Nháº­p Link iPA/g, ipaUrl)
    .replace(/Nháº­p Bundle ID/g, bundleId)
    .replace(/Nháº­p PhiÃªn Báº£n/g, version)
    .replace(/Nháº­p TÃªn App/g, appName);

  // Táº¡o Blob vÃ  objectURL cho .plist
  const plistBlob = new Blob([plist], {type:"application/xml"});
  const plistUrl = URL.createObjectURL(plistBlob);

  // Gá»£i Ã½ link cÃ i Ä‘áº·t (ngÆ°á»i dÃ¹ng cáº§n thay thÃ nh link host public sau khi upload)
  const fakeHost = "https://yourhost.com/path/to/your.plist";
  const itmsSample = `itms-services://?action=download-manifest&url=${encodeURIComponent(fakeHost)}`;

  result.innerHTML = `
    <label>File .plist Ä‘Ã£ táº¡o:</label><br>
    <a class="plist-link" href="${plistUrl}" download="${appName.replace(/\s+/g,"_") || "app"}.plist">Táº£i file .plist vá»</a>
    <br>
    <label>Link cÃ i Ä‘áº·t (dÃ¹ng cho iOS, sá»­a láº¡i Ä‘Æ°á»ng dáº«n sau khi upload):</label><br>
    <input type="text" value="${itmsSample}" readonly style="width:99%;max-width:99%;padding:7px;margin:7px 0 5px 0;font-size:15px;">
    <a class="install-link" href="${itmsSample}">CÃ i Ä‘áº·t ngay (dÃ¹ng thá»­ trÃªn iOS)</a>
    <div class="note" style="margin-top:6px;">* Sau khi táº£i file .plist vá», hÃ£y upload lÃªn host cÃ´ng khai (github.io, vps, firebase, v.v.)<br>
    * Thay <b>https://yourhost.com/path/to/your.plist</b> báº±ng link public thá»±c táº¿ cá»§a file .plist báº¡n vá»«a up.<br>
    * Link <b>itms-services://...</b> chá»‰ hoáº¡t Ä‘á»™ng trÃªn Safari/iOS.</div>
    <details>
      <summary>Xem ná»™i dung file .plist Ä‘Ã£ táº¡o</summary>
      <pre style="max-width:700px;overflow:auto;background:#f6f6f8;border:1px solid #eee;border-radius:8px;padding:10px;font-size:0.97em">${plist.replace(/[<>&]/g, c=>({"<":"&lt;",">":"&gt;","&":"&amp;"}[c]))}</pre>
    </details>
  `;
};
</script>
</body>
</html>